MELLOW PROJECT STRUCTURE
========================

Repository Root
â”œâ”€â”€ README.md                          # ğŸ“˜ Main documentation (START HERE!)
â”œâ”€â”€ train.py                           # ğŸš€ Main entry point
â”œâ”€â”€ requirements.txt                   # ğŸ“¦ Python dependencies
â”‚
â”œâ”€â”€ config/                            # âš™ï¸ Configuration Files
â”‚   â”œâ”€â”€ local3.yaml                    # Local training
â”‚   â”œâ”€â”€ localeval.yaml                 # Evaluation
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ docs/                              # ğŸ“š Documentation
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md             # Quick commands cheat sheet
â”‚   â”œâ”€â”€ DISTRIBUTED_TRAINING_README.md # Distributed training overview
â”‚   â”œâ”€â”€ LAUNCH_GUIDE.md                # Complete launch guide
â”‚   â”œâ”€â”€ QUICKSTART_SLURM.md            # SLURM quick start
â”‚   â”œâ”€â”€ SLURM_SETUP.md                 # SLURM detailed guide
â”‚   â””â”€â”€ TROUBLESHOOTING.md             # Common problems & solutions
â”‚
â”œâ”€â”€ scripts/                           # ğŸ› ï¸ Launch Scripts & Tools
â”‚   â”œâ”€â”€ test_distributed.sh            # Test multi-GPU setup
â”‚   â”œâ”€â”€ check_env.py                   # Check environment variables
â”‚   â”œâ”€â”€ verify_slurm_setup.py          # Verify SLURM setup
â”‚   â”‚
â”‚   â”œâ”€â”€ slurm/                         # SLURM Launch Scripts
â”‚   â”‚   â”œâ”€â”€ slurm_train.sh             # Multi-node production
â”‚   â”‚   â”œâ”€â”€ slurm_train_single_node.sh # Single node testing
â”‚   â”‚   â”œâ”€â”€ slurm_train_torchrun.sh    # Alternative launcher
â”‚   â”‚   â””â”€â”€ slurm_debug.sh             # Debug mode
â”‚   â”‚
â”‚   â””â”€â”€ ssh/                           # SSH Launch Scripts
â”‚       â”œâ”€â”€ launch_singlenode.sh       # Single node, multi-GPU
â”‚       â”œâ”€â”€ launch_torchrun_auto.sh    # Automated multi-node
â”‚       â”œâ”€â”€ launch_torchrun_multinode.sh # Manual multi-node
â”‚       â”œâ”€â”€ launch_multinode.sh        # Legacy launcher
â”‚       â””â”€â”€ launch_pdsh_multinode.sh   # Using pdsh
â”‚
â”œâ”€â”€ models/                            # ğŸ¤– Model Architecture
â”‚   â”œâ”€â”€ mellow.py                      # Main model
â”‚   â”œâ”€â”€ audio.py                       # Audio encoders (HTSAT, CNN14)
â”‚   â”œâ”€â”€ decoder.py                     # Text decoders
â”‚   â””â”€â”€ generate.py                    # Generation utilities
â”‚
â”œâ”€â”€ data/                              # ğŸ“Š Data Loading
â”‚   â”œâ”€â”€ audiotext_dataset.py           # Training dataset
â”‚   â”œâ”€â”€ audiotext_eval_dataset.py      # Evaluation dataset
â”‚   â””â”€â”€ sampler.py                     # Distributed sampler
â”‚
â”œâ”€â”€ training/                          # ğŸ‹ï¸ Training Framework
â”‚   â”œâ”€â”€ trainer.py                     # Main trainer class
â”‚   â””â”€â”€ log.py                         # Logging utilities
â”‚
â”œâ”€â”€ distributed/                       # ğŸŒ Distributed Training
â”‚   â”œâ”€â”€ torch.py                       # PyTorch DDP wrapper
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ metrics/                           # ğŸ“ˆ Evaluation Metrics
â”‚   â”œâ”€â”€ aqa.py                         # Audio quality assessment
â”‚   â””â”€â”€ capmetrics.py                  # Caption metrics
â”‚
â””â”€â”€ utils/                             # ğŸ”§ Utilities
    â”œâ”€â”€ launch_utils.py                # Launch helpers
    â””â”€â”€ utils.py                       # General utilities


QUICK START GUIDE
=================

1. Test Setup
   $ scripts/test_distributed.sh 2

2. Single GPU
   $ python train.py --config config/local3.yaml

3. Single Node, Multi-GPU (4 GPUs)
   $ scripts/ssh/launch_singlenode.sh config/local3.yaml 4

4. SLURM Cluster
   $ sbatch scripts/slurm/slurm_train.sh

5. SSH Multi-Node (2 nodes Ã— 4 GPUs)
   $ scripts/ssh/launch_torchrun_auto.sh config/local3.yaml 4 node1 node2


DOCUMENTATION HIERARCHY
=======================

README.md (Main)
    â†“
    â”œâ”€â”€ docs/QUICK_REFERENCE.md (Cheat sheet)
    â”œâ”€â”€ docs/DISTRIBUTED_TRAINING_README.md (Quick overview)
    â””â”€â”€ docs/LAUNCH_GUIDE.md (Complete guide)
            â†“
            â”œâ”€â”€ docs/QUICKSTART_SLURM.md (SLURM TL;DR)
            â”œâ”€â”€ docs/SLURM_SETUP.md (SLURM details)
            â””â”€â”€ docs/TROUBLESHOOTING.md (When stuck)


SCRIPT SELECTION GUIDE
======================

For Testing:
    â†’ scripts/test_distributed.sh

For Single Node:
    â†’ scripts/ssh/launch_singlenode.sh

For Multi-Node SSH (easy):
    â†’ scripts/ssh/launch_torchrun_auto.sh

For Multi-Node SSH (control):
    â†’ scripts/ssh/launch_torchrun_multinode.sh

For SLURM (testing):
    â†’ scripts/slurm/slurm_train_single_node.sh

For SLURM (production):
    â†’ scripts/slurm/slurm_train.sh
